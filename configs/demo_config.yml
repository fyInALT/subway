extensions:
  client:
    endpoints:
      # run anvil -b 12 --slots-in-an-epoch 1 --port 8547
      - ws://127.0.0.1:8547
      # - wss://op-demo.alt.technology/ws
  eth_api:
    stale_timeout_seconds: 180 # rotate endpoint if no new blocks for 3 minutes
    finalized_interval_seconds: 10 # get finalized head every 10 seconds
  telemetry:
    #provider: otlp
    #agent_endpoint: http://127.0.0.1:4317
  prometheus:
    port: 9616
    listen_address: "0.0.0.0"
    #prefix: "subway"
  block_cache:
    ttl_unit_seconds: 12
    default_finalized_ttl_units: 150
    default_finalized_size: 4096
    default_recent_ttl_units: 5
    default_recent_size: 4096
  server:
    port: 8545
    listen_address: "0.0.0.0"
    max_connections: 2000
    max_batch_size: 10
    cors: all
  # these are for demo purpose only, please adjust to your needs.
  # It's recommend to use big `period_secs` to reduce CPU costs.
#  rate_limit:
#    connection: # 1000 weight per 10 second per connection
#      burst: 1000
#      period_secs: 10
#      # default: true
#      blocking: false # false by default
#    ip: # 1000 weight per 10 seconds per ip
#      burst: 1000
#      period_secs: 10
#      blocking: false # false by default
#    global: # 100000 weight per 10 seconds for global request
#      burst: 100000
#      period_secs: 10
#      blocking: false # false by default
#    use_xff: true # whether to use the X-Forwarded-For header to get the remote ip, false by default
  whitelist:
    eth_call:
      # allow 0x01 to create contract.
      # - from: 0000000000000000000000000000000000000001
      #   to: create
      # allow anyone to call 0x02.
      # - to: 0000000000000000000000000000000000000002
      # allow anyone to call any address(not including create contract)
      # - to: "*"
      - from: anyAddress
        to: anyAddress
    tx:
      - from: anyAddress
        to: anyAddress
      # allow 0x01 to send tx to anyone.
      # - from: 0000000000000000000000000000000000000001
      # allow 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 to send tx to create contract.
      - from: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
        to: create
      # allow 0xff... address to create contract
      # - from: 0xff*
        # to: create
  blacklist:
    eth_call:
      # not allow 0x02 to call 0x01.
      - from: 0000000000000000000000000000000000000002
        to: 0000000000000000000000000000000000000001
    tx:
      # not allow 0x03 to send tx.
      - from: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
      - to: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
middlewares:
  methods:
    - whitelist
    - blacklist
    - response
    - block_cache
    - upstream
  subscriptions:
    - upstream

rpcs: rpc_configs/geth.yml
